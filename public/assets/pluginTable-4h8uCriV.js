import{P as j}from"./PaginatioN-SZ-HhFFY.js";import{S as A,f as M,p as U}from"./parseISO-wJ2maIJk.js";import{_ as T,o as u,c,a as e,F as R,p as O,b as L,r as d,u as z,d as I,e as G,f as Y,g as m,t as r,h as f,i as X,j as q,k as H}from"./index-T134NRIc.js";const y=_=>(O("data-v-2bf78971"),_=_(),L(),_),J=y(()=>e("label",{for:"all"},"All",-1)),K=y(()=>e("label",{for:"lastYear"},"Last Year",-1)),Z=y(()=>e("label",{for:"thisYear"},"This Year ",-1)),ee=y(()=>e("label",{for:"lastMonth"},"Last Month",-1)),te=y(()=>e("label",{for:"thisMonth"},"This Month",-1)),ae=y(()=>e("label",{for:"lastWeek"},"Last Week ",-1)),oe=y(()=>e("label",{for:"thisWeek"},"This Week ",-1)),se=y(()=>e("label",{for:"today"},"Today",-1)),ne={__name:"DateRange",emits:["dateRangeSelected"],setup(_,{emit:v}){const h=v,i=p=>{const{startDate:t,endDate:o}=C(p.target.value);h("dateRangeSelected",{startDate:t,endDate:o})},C=p=>{const t=new Date;let o,n,D,w,k;switch(p){case"lastYear":o=new Date(t.getFullYear()-1,0,1),n=new Date(t.getFullYear()-1,11,31);break;case"thisYear":o=new Date(t.getFullYear(),0,1),n=new Date;break;case"lastMonth":o=new Date(t.getFullYear(),t.getMonth()-1,1),n=new Date(t.getFullYear(),t.getMonth(),0);break;case"thisMonth":o=new Date(t.getFullYear(),t.getMonth(),1),n=new Date;break;case"lastWeek":D=new Date(t.getTime()-7*24*60*60*1e3),o=new Date(D.getFullYear(),D.getMonth(),D.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1);break;case"thisWeek":w=t.getDate()-t.getDay(),k=w+6,o=new Date(t.setDate(w)),n=new Date(t.setDate(k));break;case"today":o=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate());break;default:o="",n="";break}return{startDate:o,endDate:n}};return(p,t)=>(u(),c(R,null,[e("input",{id:"all",type:"radio",name:"timeframe",value:"all",checked:"",onChange:i},null,32),J,e("input",{id:"lastYear",type:"radio",name:"timeframe",value:"lastYear",onChange:i},null,32),K,e("input",{id:"thisYear",type:"radio",name:"timeframe",value:"thisYear",onChange:i},null,32),Z,e("input",{id:"lastMonth",type:"radio",name:"timeframe",value:"lastMonth",onChange:i},null,32),ee,e("input",{id:"thisMonth",type:"radio",name:"timeframe",value:"thisMonth",onChange:i},null,32),te,e("input",{id:"lastWeek",type:"radio",name:"timeframe",value:"lastWeek",onChange:i},null,32),ae,e("input",{id:"thisWeek",type:"radio",name:"timeframe",value:"thisWeek",onChange:i},null,32),oe,e("input",{id:"today",type:"radio",name:"timeframe",value:"today",onChange:i},null,32),se],64))}},le=T(ne,[["__scopeId","data-v-2bf78971"]]),$=_=>(O("data-v-299e20e0"),_=_(),L(),_),re={class:"tablearea"},ue=$(()=>e("h1",null,"Purchase List",-1)),ie={class:"bar"},ce=$(()=>e("div",{class:"spacer"},null,-1)),de={class:"Table"},_e={key:0},pe={class:"material-symbols-outlined"},he={key:0},ve={class:"material-symbols-outlined"},ge={key:0},me={class:"material-symbols-outlined"},fe={key:0},ye={class:"material-symbols-outlined"},De={key:0},we={class:"material-symbols-outlined"},ke={key:0},be={class:"material-symbols-outlined"},Ce={key:0},Pe={class:"material-symbols-outlined"},$e={key:0},Me={class:"material-symbols-outlined"},Ye=$(()=>e("th",null,"Actions",-1)),Te=$(()=>e("td",null,[e("a",{href:"#"},"Details")],-1)),Se={__name:"TablePlug",setup(_){const v=d(null),h=d(1),i=d(""),C=d(1),p=d(5),t=d(0),o=d("PO"),n=d("asc"),D=d(""),w=d(""),k=d(""),S=z(),F=I(()=>v.value?D.value?v.value.filter(l=>Object.values(l).some(a=>String(a).toLowerCase().includes(D.value.toLowerCase()))):v.value:null),B=I(()=>{if(!F.value)return null;let l=F.value.slice();return o.value&&l.sort((a,s)=>{let P=n.value==="desc"?-1:1;return a[o.value]<s[o.value]?-1*P:a[o.value]>s[o.value]?1*P:0}),l}),b=async()=>{try{const a=await(await fetch(`https://localhost:8000/purchase/list?page=${h.value}&limit=${p.value}&search=${i.value}&datef=${w.value}&datee=${k.value}&sortBy=${o.value}&sortOrder=${n.value}`,{method:"GET",headers:{"Content-Type":"application/json",authorization:S.token,"X-CSRF-Token":S.ctoken},credentials:"include"})).json();a.Data!==null?(a.Data.forEach(s=>{s.Pdate=M(U(s.Pdate),"dd-MMM-yy")}),v.value=a.Data):v.value=[],t.value=a.TotalRecords,C.value=Math.ceil(a.TotalRecords/p.value)}catch(l){console.error("Error fetching data:",l)}},x=({startDate:l,endDate:a})=>{if(l&&a){const s=W=>W instanceof Date&&!isNaN(W);if(!s(l)||!s(a)){console.error("Invalid date format");return}const P=M(l,"yyyy-MM-dd"),V=M(a,"yyyy-MM-dd");w.value=P,k.value=V}else w.value="",k.value="";h.value=1,b()},N=l=>{h.value=l,b()},E=l=>{i.value=l,h.value=1,b()},Q=l=>{p.value=l,h.value=1,b()},g=l=>{o.value=l,n.value=n.value==="asc"?"desc":"asc",b()};return G(b),(l,a)=>(u(),c("div",re,[ue,e("div",ie,[Y(A,{onSearch:E}),ce,Y(le,{onDateRangeSelected:x})]),e("table",de,[e("thead",null,[e("tr",null,[e("th",{onClick:a[0]||(a[0]=s=>g("PO")),class:"sortable"},[m(" PO "),o.value==="PO"?(u(),c("span",_e,[e("span",pe,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[1]||(a[1]=s=>g("Pdate")),class:"sortable"},[m(" Date "),o.value==="Pdate"?(u(),c("span",he,[e("span",ve,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[2]||(a[2]=s=>g("Item_list")),class:"sortable"},[m(" Item List"),o.value==="Item_list"?(u(),c("span",ge,[e("span",me,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[3]||(a[3]=s=>g("Description")),class:"sortable"},[m(" Description"),o.value==="Description"?(u(),c("span",fe,[e("span",ye,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[4]||(a[4]=s=>g("Category")),class:"sortable"},[m(" Category"),o.value==="Category"?(u(),c("span",De,[e("span",we,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[5]||(a[5]=s=>g("Qty")),class:"sortable"},[m(" Qty"),o.value==="Qty"?(u(),c("span",ke,[e("span",be,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[6]||(a[6]=s=>g("Price")),class:"sortable"},[m(" Price"),o.value==="Price"?(u(),c("span",Ce,[e("span",Pe,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[7]||(a[7]=s=>g("User")),class:"sortable"},[m(" User"),o.value==="User"?(u(),c("span",$e,[e("span",Me,r(n.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),Ye])]),e("tbody",null,[(u(!0),c(R,null,X(B.value,s=>(u(),c("tr",{key:s.PO},[e("td",null,r(s.PO),1),e("td",null,r(s.Pdate),1),e("td",null,r(s.Item_list),1),e("td",null,r(s.Description),1),e("td",null,r(s.Category),1),e("td",null,r(s.Qty),1),e("td",null,r(s.Price),1),e("td",null,r(s.User),1),Te]))),128))])]),Y(j,{"current-page":h.value,"total-page-count":C.value,"per-page":p.value,totalRecords:t.value,onPageChange:N,onPerPageChange:Q},null,8,["current-page","total-page-count","per-page","totalRecords"])]))}},Fe=T(Se,[["__scopeId","data-v-299e20e0"]]),We={components:{TablePlug:Fe}};function Ie(_,v,h,i,C,p){const t=H("TablePlug");return u(),q(t)}const Be=T(We,[["render",Ie]]);export{Be as default};
